(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,n){e.exports=n(219)},115:function(e,t,n){},118:function(e,t,n){},119:function(e,t){Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds()};for(var n in/(y+)/i.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}},131:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),i=n(5),l=n.n(i),o=(n(115),n(116),n(108)),c=n.n(o),r=n(50),h=n(51),u=n(54),d=n(52),p=n(55),m=(n(118),{DEMO_MQTT:!1,IS_BrowserRouter:!1}),b=(n(119),n(76)),E=n(23),g=n(109),v=n.n(g),C=(n(120),n(17)),f=n.n(C),y=(n(79),n(34)),M=n.n(y),S=(n(123),n(12)),w=n.n(S),k=(n(127),n(105)),O=n.n(k),q=(n(129),n(36)),T=n.n(q),I=n(102),D=(n(131),n(103)),N=n.n(D),Q=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={btnOpenDisabled:!1,btnCloseDisabled:!0,btnSendDisabled:!0,btnSubDisabled:!0,host:"192.168.136.148",port:9e3,clientId:"webMqttClient",ssl:"0",mqttTopic:"World",mqttMessage:"Hello",mqttQos:"0",mqttRetain:"0",subTopic:"World",subQos:"0"},n.client=null,n.GlobalEnvParams.DEMO_MQTT||(n.state.host="127.0.0.1"),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"dispalyMesage",value:function(e){var t=!!arguments[1]&&arguments[1],n=document.getElementById("log"),a="msgClient";t&&(a="msgServer"),n.innerHTML="<div class='logitem'>"+(new Date).format("hh:mm:ss S: ")+"<span class='"+a+"'> "+e+"</span></div>"+n.innerHTML}},{key:"clearMessage",value:function(){document.getElementById("log").innerHTML=""}},{key:"controlBtn",value:function(){var e=!1;null!=this.client&&this.client.isConnected()&&(e=!0),this.setState({btnOpenDisabled:e}),this.setState({btnCloseDisabled:!e}),this.setState({btnSendDisabled:!e}),this.setState({btnSubDisabled:!e})}},{key:"publish",value:function(){if(null!=this.client&&this.client.isConnected()){var e=this.state.mqttTopic,t=this.state.mqttMessage,n=this.state.mqttQos,a=Boolean(Number(this.state.mqttRetain)),s=new window.Paho.MQTT.Message(t);s.destinationName=e,s.qos=Number(n),s.retained=a,this.client.send(s)}}},{key:"subscribe",value:function(){if(null!=this.client&&this.client.isConnected()){var e=Number(this.state.subQos),t=this.state.subTopic,n={qos:e};this.client.subscribe(t,n);var a="subscribe - topic:"+t+" qos"+e;this.dispalyMesage(a)}}},{key:"close",value:function(){null!=this.client&&this.client.isConnected()&&(this.client.disconnect(),this.controlBtn())}},{key:"open",value:function(){if(this.controlBtn(),null!=this.client&&this.client.isConnected()&&this.close(),window.WebSocket){var e=this.state.host,t=Number(this.state.port),n=this.state.clientId,a=Boolean(Number(this.state.ssl));this.client=new window.Paho.MQTT.Client(e,t,"/mqtt",n),this.client.onConnectionLost=this.onConnectionLost.bind(this),this.client.onMessageArrived=this.onMessageArrived.bind(this),this.client.connect({onSuccess:this.onConnect.bind(this),useSSL:a}),this.dispalyMesage("connect init...")}else alert("browse not support WebSocket\uff01")}},{key:"onConnect",value:function(){this.dispalyMesage("onConnect - "+this.client.clientId),this.controlBtn(),this.GlobalEnvParams.DEMO_MQTT&&(this.subscribe(),this.publish())}},{key:"onConnectionLost",value:function(e){0!==e.errorCode&&this.dispalyMesage("onConnectionLost -"+e.errorMessage)}},{key:"onMessageArrived",value:function(e){var t="<span>message - topic: "+e.topic+"</span><span> qos"+e.qos+"</span>";t+="<div class='msgContent'>"+e.payloadString+"</div>",this.dispalyMesage(t,!0)}},{key:"handleScriptCreate",value:function(){console.log("handleScriptCreate"),this.setState({scriptLoaded:!1})}},{key:"handleScriptError",value:function(){console.log("handleScriptError"),this.setState({scriptError:!0})}},{key:"handleScriptLoad",value:function(){console.log("handleScriptLoad"),this.setState({scriptLoaded:!0}),this.GlobalEnvParams.DEMO_MQTT&&this.open()}},{key:"componentDidMount",value:function(){}},{key:"handleInputChange",value:function(e,t){var n=null;"string"===typeof t||"number"===typeof t?n=t:"object"==typeof t.target?n=t.target.value:alert("handleInputChange: "+typeof t),e&&null!=n&&this.setState(Object(I.a)({},e,n))}},{key:"render",value:function(){return s.a.createElement("div",{className:""},s.a.createElement(N.a,{url:"./paho-mqtt.js",onCreate:this.handleScriptCreate.bind(this),onError:this.handleScriptError.bind(this),onLoad:this.handleScriptLoad.bind(this)}),s.a.createElement("h2",null,"MQTT WebSocket Client"),s.a.createElement("div",{className:"connect"},s.a.createElement("h3",null,"connect"),s.a.createElement("span",null,s.a.createElement("label",null,"client:"),s.a.createElement(T.a,{style:{width:120},onChange:this.handleInputChange.bind(this,"clientId"),defaultValue:this.state.clientId})),s.a.createElement("span",null,"host:",s.a.createElement(T.a,{style:{width:160},onChange:this.handleInputChange.bind(this,"host"),defaultValue:this.state.host})),s.a.createElement("span",null,"port:",s.a.createElement(O.a,{style:{width:100},onChange:this.handleInputChange.bind(this,"port"),defaultValue:this.state.port})),s.a.createElement("span",null,"ssl:",s.a.createElement(w.a,{defaultValue:this.state.ssl,onChange:this.handleInputChange.bind(this,"ssl")},s.a.createElement(w.a.Option,{value:"0"},"false"),s.a.createElement(w.a.Option,{value:"1"},"true"))),s.a.createElement("span",{className:"btnContainer"},s.a.createElement(M.a,{type:"",disabled:this.state.btnOpenDisabled,onClick:this.open.bind(this)},"open"),s.a.createElement(M.a,{type:"",disabled:this.state.btnCloseDisabled,onClick:this.close.bind(this)},"close"))),s.a.createElement("div",{className:"publish"},s.a.createElement("h3",null,"publish"),s.a.createElement("span",null,"topic:",s.a.createElement(T.a,{style:{width:120},type:"text",defaultValue:this.state.mqttTopic,onChange:this.handleInputChange.bind(this,"mqttTopic")})),s.a.createElement("span",null,"msg:",s.a.createElement(T.a,{style:{width:120},type:"text",defaultValue:this.state.mqttMessage,onChange:this.handleInputChange.bind(this,"mqttMessage")})),s.a.createElement("span",null,"qos:",s.a.createElement(w.a,{defaultValue:this.state.mqttQos,style:{width:60},onChange:this.handleInputChange.bind(this,"mqttQos")},s.a.createElement(w.a.Option,{value:"0"},"0"),s.a.createElement(w.a.Option,{value:"1"},"1"),s.a.createElement(w.a.Option,{value:"2"},"2"))),s.a.createElement("span",null,"retain:",s.a.createElement(w.a,{defaultValue:this.state.mqttRetain,onChange:this.handleInputChange.bind(this,"mqttRetain")},s.a.createElement(w.a.Option,{value:"0"},"false"),s.a.createElement(w.a.Option,{value:"1"},"true"))),s.a.createElement("span",{className:"btnContainer"},s.a.createElement(M.a,{type:"",disabled:this.state.btnSendDisabled,onClick:this.publish.bind(this)},"publish"))),s.a.createElement("div",{className:"subscribe"},s.a.createElement("h3",null,"subscribe"),s.a.createElement("span",null,"topic:",s.a.createElement(T.a,{style:{width:120},type:"text",defaultValue:this.state.subTopic,onChange:this.handleInputChange.bind(this,"subTopic")})),s.a.createElement("span",null,"qos:",s.a.createElement(w.a,{style:{width:60},defaultValue:this.state.subQos,onChange:this.handleInputChange.bind(this,"subQos")},s.a.createElement(w.a.Option,{value:"0"},"0"),s.a.createElement(w.a.Option,{value:"1"},"1"),s.a.createElement(w.a.Option,{value:"2"},"2"))),s.a.createElement("span",{className:"btnContainer"},s.a.createElement(M.a,{disabled:this.state.btnSubDisabled,onClick:this.subscribe.bind(this)},"subscribe"))),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("span",{className:"msgHeader"}," Message"),s.a.createElement(f.a,{type:"delete",onClick:this.clearMessage.bind(this)})),s.a.createElement("div",{id:"log",className:"log"})))}}]),t}(s.a.Component);a.Component.prototype.GlobalEnvParams=m;var L=function(e){function t(){return Object(r.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=null;return e=this.GlobalEnvParams.IS_BrowserRouter?s.a.createElement(b.a,null,s.a.createElement(E.c,null,s.a.createElement(E.a,{path:"/",component:Q}))):s.a.createElement(b.b,null,s.a.createElement(E.c,null,s.a.createElement(E.a,{path:"/",component:Q}))),s.a.createElement(c.a,{locale:v.a},e)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[110,1,2]]]);